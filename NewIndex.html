<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <!-- Import FawryPay CSS Library-->
    <link rel="stylesheet" href="https://atfawry.fawrystaging.com/atfawry/plugin/assets/payments/css/fawrypay-payments.css">
    <!-- Import FawryPay Staging JavaScript Library-->
    <script src="https://cdn.jsdelivr.net/gh/emn178/js-sha256/build/sha256.min.js"></script>
    <script type="text/javascript" src="https://atfawry.fawrystaging.com/atfawry/plugin/assets/payments/js/fawrypay-payments.js"></script>
    <script>
        function checkout() {
            const configuration = {
                locale : "en",  //default en
                mode: DISPLAY_MODE.POPUP,  //required, allowed values [POPUP, INSIDE_PAGE, SIDE_PAGE]
            };
        FawryPay.checkout(buildChargeRequest(), configuration);
        }
        function buildChargeRequest() {
            let merchantRefNum = Math.floor((Math.random() * 10) + 1);
            var chargeRequest = {
                            merchantCode: 'siYxylRjSPwQs0gHngum7Q==',
                            merchantRefNum: merchantRefNum,
                            customerMobile: '01124545040',
                            customerEmail: 'm@gmial.com',
                            customerProfileId :'123',
                            customerName: '',
                            chargeItems: [
                                    {
                                        itemId: '6b5f',
                                        description: 'Product Description',
                                        price: 50.00,
                                        quantity: 2
                                    },
                                    {
                                        itemId: '10b5f6',
                                        description: 'Product Description',
                                        price: 50.00,
                                        quantity: 2
                                    }
                            ],
                            returnUrl: 'https://www.google.com',
                            authCaptureModePayment: false,
                            secKey: "d05552a3-be4b-4b66-8a4f-e059f9b9b4cb"
                        };
						
	chargeRequest.signature  = signRequest(chargeRequest);
   return chargeRequest;
}

		function signRequest(chargeRequest){
		var signString = chargeRequest['merchantCode']+chargeRequest.merchantRefNum;
        signString += chargeRequest.customerProfileId!=null?chargeRequest.customerProfileId:'';
        signString += chargeRequest.returnUrl!=null?chargeRequest.returnUrl:'';
		var items = chargeRequest.chargeItems.sort(function (x, y) {
    let a = x.itemId.toUpperCase(),
        b = y.itemId.toUpperCase();
    return a == b ? 0 : a > b ? 1 : -1;});
	
	items.forEach((item) => {
        signString += item.itemId+''+item.quantity+''+item.price.toFixed(2);
	});
	signString += chargeRequest.secKey;


           return  sha256(signString);
		}
    </script>
	
	
	
</head>
<body>
    <!-- FawryPay Checkout Button -->
    <input type="image" onclick="checkout();" src="https://www.atfawry.com/assets/img/FawryPayLogo.jpg"
    alt="pay-using-fawry" id="fawry-payment-btn"/>
</body>
</html>